{% extends 'patient/base.html' %}
{% load static %}
{% block title %} :: I-Health::  Pharmacy Appointment{% endblock title %}

{% block custom_css %}
{% endblock custom_css %}

{% block content %}
{% comment %} {% if booking.status == "accepted" %}
  <h6>Your booking is accepted </h6>
{% endif %}
{% if booking.status == "rejected" %}
  <h6>Your booking is rejected </h6>
{% endif %}
{% if booking.status == "taken" %}
  <h6>Your booking is competed </h6>
{% endif %}
{% if booking.status == "" %}
{% endif %} {% endcomment %}
<div>
<span id="status"></span>
  <h6>Wiat for some time.......Store will confirm once</h6>
  <h6> you will be redirect to the Home page your page  </h6>
</div>
{% endblock content %}


{% block modal_fade %}
{% endblock modal_fade %}

{% block custom_js %}
<script>

  var booking_id = '{{booking.id}}'
  let socket =  new WebSocket('ws://localhost:8000/ws/patient/' + booking_id)

 

  socket.onopen = function(e){
    console.log("connected")
  }
  socket.onmessage = function(e){
    console.log(e.data)
    var data = JSON.parse(e.data)
    console.log(data.payload.status)
    increaseProgress(data.payload.status)
    }
  socket.onclose = function(e){

  }
  function increaseProgress(status){
    var status_js = document.querySelector('#status')
    status_js.innerHTML = status
  }

// redirect to google after 5 seconds
//window.setTimeout(function() {
  //  window.location.href = 'http://www.google.com';
//}, 5000);

// Your delay in milliseconds
//var delay = 5000;
//setTimeout(function(){ window.location = "{% url 'patient_home' %}"; }, delay);
</script>
{% endblock custom_js %}